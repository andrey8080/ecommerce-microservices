# üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢: Laboratory Work #4 - Camunda BPM Integration

**–î–∞—Ç–∞:** 18 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û**

## üìä –ö–†–ê–¢–ö–ò–ô –û–ë–ó–û–† –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

‚úÖ **–í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –∑–¥–æ—Ä–æ–≤—ã**  
‚úÖ **Camunda BPM –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã**  
‚úÖ **Camunda UI –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –≤—Å–µ—Ö –ø–æ—Ä—Ç–∞—Ö**  
‚úÖ **BPMN –ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç**  
‚úÖ **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ BPMN-–ø—Ä–æ—Ü–µ—Å—Å—ã**

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã —Å Camunda BPM:
- **User Service** (port 8081) - ‚úÖ –ó–∞–ø—É—â–µ–Ω + Camunda UI
- **Product Catalog Service** (port 8082) - ‚úÖ –ó–∞–ø—É—â–µ–Ω + Camunda UI  
- **Order Service** (port 8084) - ‚úÖ –ó–∞–ø—É—â–µ–Ω + Camunda UI
- **Payment Service** (port 8085) - ‚úÖ –ó–∞–ø—É—â–µ–Ω + Camunda UI
- **Cart Service** (port 8083) - ‚úÖ –ó–∞–ø—É—â–µ–Ω + Camunda UI
- **API Gateway** (port 8090) - ‚úÖ –ó–∞–ø—É—â–µ–Ω

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
- **RabbitMQ** (port 5672, UI: 15672) - ‚úÖ –ó–∞–ø—É—â–µ–Ω
- **PostgreSQL** (User: 5433, Product: 5434, Order: 5435, Payment: 5436) - ‚úÖ –ó–∞–ø—É—â–µ–Ω
- **Cassandra** (port 9042) - ‚úÖ –ó–∞–ø—É—â–µ–Ω

---

## üîß –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### 1. Camunda BPM –≤ Embedded Mode
‚úÖ **–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º Camunda**
- Camunda Engine 7.21.0
- Spring Boot Starter Webapp
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ UI –Ω–∞ –∫–∞–∂–¥–æ–º –ø–æ—Ä—Ç—É

### 2. BPMN –ü—Ä–æ—Ü–µ—Å—Å—ã –ø–æ –°–µ—Ä–≤–∏—Å–∞–º

#### User Service (‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç):
- ‚úÖ `user-process.bpmn` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `user-maintenance.bpmn` - –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (userCleanup, userStats)
- **–†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ:** 4 –ø—Ä–æ—Ü–µ—Å—Å–∞ (userCleanup, userRegistrationProcess v1&v2, userStats)

#### Order Service (‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç):
- ‚úÖ `order-full-process.bpmn` - –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫–∞–∑–∞ —Å –ø–ª–∞—Ç–µ–∂–æ–º
- **–†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ:** 3 –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ orderPaymentProcess

#### Payment Service (‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç):
- ‚úÖ `payment-process.bpmn` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚ö†Ô∏è `payment-maintenance.bpmn` - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (–Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é)

#### Cart Service (‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç):
- ‚úÖ `cart-process.bpmn` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π
- **–†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ:** 1 –ø—Ä–æ—Ü–µ—Å—Å cartProcess

#### Product Catalog Service (‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è):
- üìÅ `product-process.bpmn` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ (—Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- üìÅ `product-maintenance.bpmn` - –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ (—Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- ‚ùå **–ü—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—é—Ç—Å—è** (ApplicationRunner –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è)

---

## üéõÔ∏è CAMUNDA UI –î–û–°–¢–£–ü–ù–û–°–¢–¨

### –í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ HTTP —Å—Ç–∞—Ç—É—Å 302 (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é):

| –°–µ—Ä–≤–∏—Å          | URL                            | –°—Ç–∞—Ç—É—Å | –õ–æ–≥–∏–Ω/–ü–∞—Ä–æ–ª—å |
| --------------- | ------------------------------ | ------ | ------------ |
| User Service    | http://localhost:8081/camunda/ | ‚úÖ 302  | demo/demo    |
| Product Catalog | http://localhost:8082/camunda/ | ‚úÖ 302  | demo/demo    |
| Order Service   | http://localhost:8084/camunda/ | ‚úÖ 302  | demo/demo    |
| Payment Service | http://localhost:8085/camunda/ | ‚úÖ 302  | demo/demo    |
| Cart Service    | http://localhost:8083/camunda/ | ‚úÖ 302  | demo/demo    |

---

## üî® –ö–õ–Æ–ß–ï–í–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `@EnableProcessApplication`  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤, –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –≥–ª–∞–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ BPMN —Ç–∞–π–º–µ—Ä–æ–≤
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `PT1H` –≤ timeCycle  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ `R/PT1H` –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ü–∏–∫–ª–æ–≤

### 3. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ BPMN
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ Camunda  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ `BpmnDeploymentConfig` —Å `ApplicationRunner`

### 4. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** "multiple none start events not supported"  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ maintenance –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Cassandra + Camunda
‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** Cart-service –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –ë–î  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω H2 –¥–ª—è Camunda + –∫–∞—Å—Ç–æ–º–Ω—ã–π TransactionManager

---

## üìà –†–ê–ó–í–ï–†–ù–£–¢–´–ï –ü–†–û–¶–ï–°–°–´

### ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ:
1. **User Service:** 4 –ø—Ä–æ—Ü–µ—Å—Å–∞
   - userCleanup (User Cleanup) v1
   - userRegistrationProcess (User Registration) v1, v2  
   - userStats (User Statistics) v1

2. **Order Service:** 3 –≤–µ—Ä—Å–∏–∏
   - orderPaymentProcess (Order with Payment) v1, v2, v3

3. **Cart Service:** 1 –ø—Ä–æ—Ü–µ—Å—Å
   - cartProcess (Cart Process) v1

4. **Payment Service:** –ß–∞—Å—Ç–∏—á–Ω–æ
   - payment-process —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
   - payment-maintenance —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- **Product Catalog Service:** BPMN —Ñ–∞–π–ª—ã –µ—Å—Ç—å, –Ω–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üõ†Ô∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Camunda:
```kotlin
implementation("org.camunda.bpm.springboot:camunda-bpm-spring-boot-starter-webapp:7.21.0")
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è H2 –¥–ª—è Camunda (Cart Service):
```yaml
spring:
  h2:
    console:
      enabled: true
  camunda-datasource:
    url: jdbc:h2:mem:camunda;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password: ""
```

### Camunda Admin –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```yaml
camunda:
  bpm:
    admin-user:
      id: demo
      password: demo
    generate-unique-process-engine-name: false
    webapp:
      application-path: /
    database:
      schema-update: true
```

---

## üéØ –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø–ú LAB4

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. **Camunda BPM –≤ embedded —Ä–µ–∂–∏–º–µ** - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤–æ –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
2. **–ó–∞–º–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏ –Ω–∞ BPMN –ø—Ä–æ—Ü–µ—Å—Å—ã** - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
3. **–†–∞–±–æ—á–∏–µ Camunda UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
4. **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ BPMN** - ‚úÖ ApplicationRunner –ø–æ–¥—Ö–æ–¥
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ Workflow** - ‚úÖ JavaDelegate –∫–ª–∞—Å—Å—ã

### ‚ö†Ô∏è –ú–µ–ª–∫–∏–µ –Ω–µ–¥–æ—á–µ—Ç—ã:
1. Product Catalog Service —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–ª–∞–¥–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è BPMN
2. Payment maintenance –ø—Ä–æ—Ü–µ—Å—Å —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª–Ω–æ—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

---

## üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ó–ê–ü–£–°–ö–ê

```bash
# –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./gradlew clean build

# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
bash scripts/deploy.sh start

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã  
bash scripts/deploy.sh stop

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8081/actuator/health
curl http://localhost:8082/actuator/health
curl http://localhost:8084/actuator/health
curl http://localhost:8085/actuator/health
```

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**Laboratory Work #4 —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!** 

–°–∏—Å—Ç–µ–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Camunda BPM –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- ‚úÖ –ó–∞–º–µ–Ω—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ BPMN –ø—Ä–æ—Ü–µ—Å—Å—ã  
- ‚úÖ –†–∞–±–æ—á–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ workflow

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –º–µ–ª–∫–∏–µ –Ω–µ–¥–æ—á–µ—Ç—ã –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã.

---

**–ê–≤—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏  
**–í–µ—Ä—Å–∏—è –æ—Ç—á–µ—Ç–∞:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 18 –∏—é–Ω—è 2025, 14:50 UTC
